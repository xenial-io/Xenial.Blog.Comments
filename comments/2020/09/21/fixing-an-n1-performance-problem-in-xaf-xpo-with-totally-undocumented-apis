{
  "Id": "2020/09/21/fixing-an-n1-performance-problem-in-xaf-xpo-with-totally-undocumented-apis",
  "Comments": [
    {
      "Id": "gE5BHydRW0otO37PIuw7Sn_yWxIkYVCan2iOpc6FisE",
      "Name": "Jacek KosiÅ„ski",
      "GithubOrEmail": null,
      "Homepage": null,
      "Content": "Impressive. Great Work Manuel! . Thanks",
      "Date": "2020-09-24T09:16:48.836213+02:00",
      "AvatarUrl": null,
      "Comments": [
        {
          "Id": "7YTLx5KohftsOATprUROsm-obyu8srGCUy36854gKXs",
          "Name": "Manuel Grundner",
          "GithubOrEmail": null,
          "Homepage": "https://blog.delegate.at",
          "Content": "Thank you Jacek!",
          "Date": "2020-09-24T09:46:03.4122632+02:00",
          "AvatarUrl": "https://avatars3.githubusercontent.com/u/653905?v=4",
          "Comments": []
        }
      ]
    },
    {
      "Id": "yv_9DuZEc_vkJLqX0erMrGKX0Ef-QlcvrYQhdKHtoSE",
      "Name": "Dom Sinclair",
      "GithubOrEmail": null,
      "Homepage": null,
      "Content": "Great article Manuel, made even better by being able to refer to the actual code samples. Many thanks.",
      "Date": "2020-09-21T17:11:20.8518788+02:00",
      "AvatarUrl": null,
      "Comments": [
        {
          "Id": "uRIjEEKFRqeH_ZUI64Vlcj0EaC1SG-braYaKsSrrF_c",
          "Name": "Manuel Grundner",
          "GithubOrEmail": null,
          "Homepage": "https://blog.delegate.at",
          "Content": "Thank you Dom! Hoped it helped!",
          "Date": "2020-09-21T19:58:33.3164032+02:00",
          "AvatarUrl": "https://avatars3.githubusercontent.com/u/653905?v=4",
          "Comments": []
        }
      ]
    },
    {
      "Id": "_FG8Gw-_KZlm5MvPK3LS5RAjr8q6PXVH-_e5YgQSua4",
      "Name": "Dennis Garavsky",
      "GithubOrEmail": null,
      "Homepage": null,
      "Content": "Manuel, thank you for a comprehensive overview.\nSession.PreFetch is a supported:-) XPO feature that can also be used in XAF apps, for instance, to load associated collections ([https://docs.devexpress.com/XPO/DevExpress.Xpo.Session.PreFetch.overloads](https://docs.devexpress.com/XPO/DevExpress.Xpo.Session.PreFetch.overloads) In this case, all associated objects will be loaded in a single query. See an example here: [https://supportcenter.devexpress.com/ticket/details/q558707/how-do-i-prefetch-related-details-data-to-increase-performance-for-calculated-fields](https://supportcenter.devexpress.com/ticket/details/q558707/how-do-i-prefetch-related-details-data-to-increase-performance-for-calculated-fields) - just wanted to share a way to approach this using a Controller, not inside a persistent class.\n\nThis comparison of data access modes can also be helpful: [https://docs.devexpress.com/eXpressAppFramework/113683/concepts/ui-construction/views/list-view-data-access-modes](https://docs.devexpress.com/eXpressAppFramework/113683/concepts/ui-construction/views/list-view-data-access-modes)\n\nThanks,\nDennis",
      "Date": "2020-09-21T15:22:52.1167335+02:00",
      "AvatarUrl": "https://avatars2.githubusercontent.com/u/5479762?v=4",
      "Comments": [
        {
          "Id": "xVPzUatdl_mrq-mckWHCVfDkeT9KMIw9HnPlMQEfgxM",
          "Name": "Manuel Grundner",
          "GithubOrEmail": null,
          "Homepage": "https://blog.delegate.at",
          "Content": "I should correct that to: Not be supported out of the box and there are some untested scenarios. :)",
          "Date": "2020-09-21T16:03:14.1850702+02:00",
          "AvatarUrl": "https://avatars3.githubusercontent.com/u/653905?v=4",
          "Comments": []
        },
        {
          "Id": "hv94ofU6v2yAyUnhBJYHpY0pfpD7GLgTsPbox9Hy__w",
          "Name": "Dennis Garavsky",
          "GithubOrEmail": null,
          "Homepage": null,
          "Content": "Your karma has been restored:-)",
          "Date": "2020-09-23T16:46:27.0038218+02:00",
          "AvatarUrl": "https://avatars2.githubusercontent.com/u/5479762?v=4",
          "Comments": []
        },
        {
          "Id": "h7nobYB2gTmpdzhMg8W4YRlfX0W6P0SSke3GHZcCw_s",
          "Name": "Manuel Grundner",
          "GithubOrEmail": null,
          "Homepage": "https://blog.delegate.at",
          "Content": "![https://media.giphy.com/media/PUBxelwT57jsQ/giphy.gif](https://media.giphy.com/media/PUBxelwT57jsQ/giphy.gif)",
          "Date": "2020-09-24T09:47:48.6567831+02:00",
          "AvatarUrl": "https://avatars3.githubusercontent.com/u/653905?v=4",
          "Comments": []
        },
        {
          "Id": "Cte6pqg3PR7AamvKfcprdecqmZXgemSx3_iTEKvBbO4",
          "Name": "Manuel Grundner",
          "GithubOrEmail": null,
          "Homepage": "https://blog.delegate.at",
          "Content": "As you stated: `Take special note that this code affects only initial loading and we do not have a good solution for the scenario when the ListView is refreshed via an Action or in code in an XAF Web application.` And thats what the N+N should solve though :D",
          "Date": "2020-09-21T20:03:04.4432882+02:00",
          "AvatarUrl": "https://avatars3.githubusercontent.com/u/653905?v=4",
          "Comments": []
        },
        {
          "Id": "Go6gRIDIBbGmWWNumpiCcgISveTQUvM1OGdTb68HlB0",
          "Name": "Manuel Grundner",
          "GithubOrEmail": null,
          "Homepage": "https://blog.delegate.at",
          "Content": "I wanted to cover Prefetch, as well as XPQuery and XPCursor as well, but this post was 3 days in the making, so I had to make tradeoffs ðŸ˜…",
          "Date": "2020-09-21T20:00:14.08434+02:00",
          "AvatarUrl": "https://avatars3.githubusercontent.com/u/653905?v=4",
          "Comments": []
        }
      ]
    },
    {
      "Id": "DQB8wEjofkcx7-9hM_YAf-aBpZ6ucGOAUTB-M9CKELg",
      "Name": "Nathan Pieper",
      "GithubOrEmail": null,
      "Homepage": null,
      "Content": "Thanks for the great description of the different DataAccessModes",
      "Date": "2020-09-21T15:16:28.6038518+02:00",
      "AvatarUrl": null,
      "Comments": [
        {
          "Id": "R5e3S7NUYgz5RTiQI8ZEewFIFyz8or_FB2qtDy8I4yc",
          "Name": "Manuel Grundner",
          "GithubOrEmail": null,
          "Homepage": "https://blog.delegate.at",
          "Content": "Thanks Nathan!",
          "Date": "2020-09-21T16:03:44.5853368+02:00",
          "AvatarUrl": "https://avatars3.githubusercontent.com/u/653905?v=4",
          "Comments": []
        }
      ]
    },
    {
      "Id": "5j87VBqiCIBew47Yn4V-dXDb2pTvwCcvFEe1pK-ATsU",
      "Name": "Frank Merian",
      "GithubOrEmail": null,
      "Homepage": "http://www.exor.ch",
      "Content": "thanks for this great post. We learned that lesson the hard way over the last 10 years. \nBut we established a slightly different pattern with PreFetch. Wondering your comments on that. \nWe use a member to cache a value per instance and session.\n\n\n<pre style=\"font-family:Cascadia Mono;font-size:13px;color:#dadada;background:#1e1e1e;\"><span style=\"color:#569cd6;\">private</span>&nbsp;<span style=\"color:#569cd6;\">int</span><span style=\"color:#b4b4b4;\">?</span>&nbsp;<span style=\"color:gainsboro;\">hoursCached</span><span style=\"color:gainsboro;\">;</span>\n<span style=\"color:#569cd6;\">public</span>&nbsp;<span style=\"color:#569cd6;\">int</span>&nbsp;<span style=\"color:gainsboro;\">Hours</span>\n<span style=\"color:gainsboro;\">{</span>\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#569cd6;\">get</span>\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:gainsboro;\">{</span>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#d8a0df;\">if</span>&nbsp;<span style=\"color:gainsboro;\">(</span><span style=\"color:gainsboro;\">hoursCached</span>&nbsp;<span style=\"color:#b4b4b4;\">==</span>&nbsp;<span style=\"color:#569cd6;\">null</span><span style=\"color:gainsboro;\">)</span>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:gainsboro;\">{</span>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#569cd6;\">var</span>&nbsp;<span style=\"color:#9cdcfe;\">offers</span>&nbsp;<span style=\"color:#b4b4b4;\">=</span>&nbsp;<span style=\"color:gainsboro;\">Session</span><span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">GetLoadedObjects</span><span style=\"color:gainsboro;\">&lt;</span><span style=\"color:gainsboro;\">OfferWithOwnCache</span><span style=\"color:gainsboro;\">&gt;()</span>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">Concat</span><span style=\"color:gainsboro;\">(</span><span style=\"color:#569cd6;\">this</span><span style=\"color:gainsboro;\">)</span>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">Where</span><span style=\"color:gainsboro;\">(</span><span style=\"color:#9cdcfe;\">x</span>&nbsp;<span style=\"color:#b4b4b4;\">=&gt;</span>&nbsp;<span style=\"color:gainsboro;\">x</span><span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">hoursCached</span>&nbsp;<span style=\"color:#569cd6;\">is</span>&nbsp;<span style=\"color:#569cd6;\">null</span><span style=\"color:gainsboro;\">)</span>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">Take</span><span style=\"color:gainsboro;\">(</span><span style=\"color:#b5cea8;\">50</span><span style=\"color:gainsboro;\">);</span>\n \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:gainsboro;\">offers</span><span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">PreFetch</span><span style=\"color:gainsboro;\">(</span><span style=\"color:gainsboro;\">nameof</span><span style=\"color:gainsboro;\">(</span><span style=\"color:gainsboro;\">OfferItems</span><span style=\"color:gainsboro;\">));</span>\n \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#d8a0df;\">foreach</span>&nbsp;<span style=\"color:gainsboro;\">(</span><span style=\"color:gainsboro;\">var</span>&nbsp;<span style=\"color:#9cdcfe;\">offer</span>&nbsp;<span style=\"color:#d8a0df;\">in</span>&nbsp;<span style=\"color:gainsboro;\">offers</span><span style=\"color:gainsboro;\">)</span>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:gainsboro;\">offer</span><span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">hoursCached</span>&nbsp;<span style=\"color:#b4b4b4;\">=</span>&nbsp;<span style=\"color:gainsboro;\">OfferItems</span><span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">Sum</span><span style=\"color:gainsboro;\">(</span><span style=\"color:#9cdcfe;\">x</span>&nbsp;<span style=\"color:#b4b4b4;\">=&gt;</span>&nbsp;<span style=\"color:gainsboro;\">x</span><span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">Hour</span><span style=\"color:gainsboro;\">);</span>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:gainsboro;\">}</span>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#d8a0df;\">return</span>&nbsp;<span style=\"color:gainsboro;\">hoursCached</span><span style=\"color:#b4b4b4;\">!</span><span style=\"color:gainsboro;\">;</span>\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:gainsboro;\">}</span>\n<span style=\"color:gainsboro;\">}</span>\n \n<span style=\"color:#57a64a;\">//&nbsp;helpers</span>\n<span style=\"color:#569cd6;\">public</span>&nbsp;<span style=\"color:#569cd6;\">static</span>&nbsp;<span style=\"color:#569cd6;\">class</span>&nbsp;<span style=\"color:#4ec9b0;\">SessionExtensions</span>\n<span style=\"color:gainsboro;\">{</span>\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#57a64a;\">//&nbsp;result&nbsp;is&nbsp;normally&nbsp;used&nbsp;to&nbsp;preFetch&nbsp;other&nbsp;data.&nbsp;Because&nbsp;preFetch&nbsp;must&nbsp;load&nbsp;the&nbsp;dependent&nbsp;objects,</span>\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#57a64a;\">//&nbsp;the&nbsp;result&nbsp;of&nbsp;this&nbsp;method&nbsp;is&nbsp;realised&nbsp;as&nbsp;an&nbsp;array.</span>\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#569cd6;\">public</span>&nbsp;<span style=\"color:#569cd6;\">static</span>&nbsp;<span style=\"color:gainsboro;\">T</span><span style=\"color:gainsboro;\">[]</span>&nbsp;<span style=\"color:#dcdcaa;\">GetLoadedObjects</span><span style=\"color:gainsboro;\">&lt;</span><span style=\"color:#b8d7a3;\">T</span><span style=\"color:gainsboro;\">&gt;(</span><span style=\"color:#569cd6;\">this</span>&nbsp;<span style=\"color:gainsboro;\">Session</span>&nbsp;<span style=\"color:#9cdcfe;\">instance</span><span style=\"color:gainsboro;\">)</span>&nbsp;<span style=\"color:#569cd6;\">where</span>&nbsp;<span style=\"color:gainsboro;\">T</span>&nbsp;<span style=\"color:gainsboro;\">:</span>&nbsp;<span style=\"color:gainsboro;\">XPBaseObject</span>\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:gainsboro;\">{</span>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#d8a0df;\">return</span>&nbsp;<span style=\"color:gainsboro;\">((</span><span style=\"color:gainsboro;\">Dictionary</span><span style=\"color:gainsboro;\">&lt;</span><span style=\"color:#569cd6;\">object</span><span style=\"color:gainsboro;\">,</span>&nbsp;<span style=\"color:#569cd6;\">object</span><span style=\"color:gainsboro;\">&gt;)</span><span style=\"color:gainsboro;\">SessionIdentityMap</span>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">GetMap</span><span style=\"color:gainsboro;\">(</span><span style=\"color:gainsboro;\">instance</span><span style=\"color:gainsboro;\">,</span>&nbsp;<span style=\"color:gainsboro;\">XpoTypesInfoHelper</span><span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">GetXpoTypeInfoSource</span><span style=\"color:gainsboro;\">()</span><span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">GetEntityClassInfo</span><span style=\"color:gainsboro;\">(</span><span style=\"color:#569cd6;\">typeof</span><span style=\"color:gainsboro;\">(</span><span style=\"color:gainsboro;\">T</span><span style=\"color:gainsboro;\">))))</span>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">Where</span><span style=\"color:gainsboro;\">(</span><span style=\"color:#9cdcfe;\">x</span>&nbsp;<span style=\"color:#b4b4b4;\">=&gt;</span>&nbsp;<span style=\"color:#569cd6;\">typeof</span><span style=\"color:gainsboro;\">(</span><span style=\"color:gainsboro;\">T</span><span style=\"color:gainsboro;\">)</span><span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">IsAssignableFrom</span><span style=\"color:gainsboro;\">(</span><span style=\"color:gainsboro;\">x</span><span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">GetType</span><span style=\"color:gainsboro;\">()))</span>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">OfType</span><span style=\"color:gainsboro;\">&lt;</span><span style=\"color:gainsboro;\">T</span><span style=\"color:gainsboro;\">&gt;()</span>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">ToArray</span><span style=\"color:gainsboro;\">();</span>\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:gainsboro;\">}</span>\n<span style=\"color:gainsboro;\">}</span>\n \n<span style=\"color:#569cd6;\">public</span>&nbsp;<span style=\"color:#569cd6;\">static</span>&nbsp;<span style=\"color:#569cd6;\">class</span>&nbsp;<span style=\"color:#4ec9b0;\">IEnumerableExtensions</span>\n<span style=\"color:gainsboro;\">{</span>\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#569cd6;\">public</span>&nbsp;<span style=\"color:#569cd6;\">static</span>&nbsp;<span style=\"color:gainsboro;\">IEnumerable</span><span style=\"color:gainsboro;\">&lt;</span><span style=\"color:gainsboro;\">T</span><span style=\"color:gainsboro;\">&gt;</span>&nbsp;<span style=\"color:#dcdcaa;\">Concat</span><span style=\"color:gainsboro;\">&lt;</span><span style=\"color:#b8d7a3;\">T</span><span style=\"color:gainsboro;\">&gt;(</span><span style=\"color:#569cd6;\">this</span>&nbsp;<span style=\"color:gainsboro;\">IEnumerable</span><span style=\"color:gainsboro;\">&lt;</span><span style=\"color:gainsboro;\">T</span><span style=\"color:gainsboro;\">&gt;</span><span style=\"color:#b4b4b4;\">?</span>&nbsp;<span style=\"color:#9cdcfe;\">instance</span><span style=\"color:gainsboro;\">,</span>&nbsp;<span style=\"color:gainsboro;\">T</span>&nbsp;<span style=\"color:#9cdcfe;\">objectToAdd</span><span style=\"color:gainsboro;\">)</span>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#b4b4b4;\">=&gt;</span>&nbsp;<span style=\"color:gainsboro;\">instance</span>&nbsp;<span style=\"color:#569cd6;\">is</span>&nbsp;<span style=\"color:#569cd6;\">null</span>&nbsp;<span style=\"color:#b4b4b4;\">?</span>&nbsp;<span style=\"color:#569cd6;\">new</span><span style=\"color:gainsboro;\">[]</span>&nbsp;<span style=\"color:gainsboro;\">{</span>&nbsp;<span style=\"color:gainsboro;\">objectToAdd</span>&nbsp;<span style=\"color:gainsboro;\">}</span>&nbsp;<span style=\"color:#b4b4b4;\">:</span>&nbsp;<span style=\"color:gainsboro;\">instance</span><span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">Concat</span><span style=\"color:gainsboro;\">(</span><span style=\"color:#569cd6;\">new</span><span style=\"color:gainsboro;\">[]</span>&nbsp;<span style=\"color:gainsboro;\">{</span>&nbsp;<span style=\"color:gainsboro;\">objectToAdd</span>&nbsp;<span style=\"color:gainsboro;\">});</span>\n \n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#569cd6;\">public</span>&nbsp;<span style=\"color:#569cd6;\">static</span>&nbsp;<span style=\"color:#569cd6;\">void</span>&nbsp;<span style=\"color:#dcdcaa;\">PreFetch</span><span style=\"color:gainsboro;\">&lt;</span><span style=\"color:#b8d7a3;\">T</span><span style=\"color:gainsboro;\">&gt;(</span><span style=\"color:#569cd6;\">this</span>&nbsp;<span style=\"color:gainsboro;\">IEnumerable</span><span style=\"color:gainsboro;\">&lt;</span><span style=\"color:gainsboro;\">T</span><span style=\"color:gainsboro;\">&gt;</span>&nbsp;<span style=\"color:#9cdcfe;\">instance</span><span style=\"color:gainsboro;\">,</span>&nbsp;<span style=\"color:#569cd6;\">string</span>&nbsp;<span style=\"color:#9cdcfe;\">propertyName</span><span style=\"color:gainsboro;\">,</span>&nbsp;<span style=\"color:#569cd6;\">params</span>&nbsp;<span style=\"color:#569cd6;\">string</span><span style=\"color:gainsboro;\">[]</span>&nbsp;<span style=\"color:#9cdcfe;\">propertyNames</span><span style=\"color:gainsboro;\">)</span>&nbsp;<span style=\"color:#569cd6;\">where</span>&nbsp;<span style=\"color:gainsboro;\">T</span>&nbsp;<span style=\"color:gainsboro;\">:</span>&nbsp;<span style=\"color:gainsboro;\">XPBaseObject</span>\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:gainsboro;\">{</span>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:gainsboro;\">instance</span>&nbsp;<span style=\"color:#b4b4b4;\">=</span>&nbsp;<span style=\"color:gainsboro;\">instance</span><span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">WhereNotNull</span><span style=\"color:gainsboro;\">();</span>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#d8a0df;\">if</span>&nbsp;<span style=\"color:gainsboro;\">(</span><span style=\"color:gainsboro;\">instance</span><span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">FirstOrDefault</span><span style=\"color:gainsboro;\">()</span><span style=\"color:#b4b4b4;\">?.</span><span style=\"color:gainsboro;\">Session</span>&nbsp;<span style=\"color:#569cd6;\">is</span>&nbsp;<span style=\"color:#569cd6;\">not</span>&nbsp;<span style=\"color:gainsboro;\">Session</span>&nbsp;<span style=\"color:#9cdcfe;\">session</span><span style=\"color:gainsboro;\">)</span>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#d8a0df;\">return</span><span style=\"color:gainsboro;\">;</span>\n \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:gainsboro;\">session</span><span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">PreFetch</span><span style=\"color:gainsboro;\">(</span><span style=\"color:gainsboro;\">session</span><span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">GetClassInfo</span><span style=\"color:gainsboro;\">&lt;</span><span style=\"color:gainsboro;\">T</span><span style=\"color:gainsboro;\">&gt;(),</span>&nbsp;<span style=\"color:gainsboro;\">instance</span><span style=\"color:gainsboro;\">,</span>&nbsp;<span style=\"color:gainsboro;\">propertyNames</span><span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">Concat</span><span style=\"color:gainsboro;\">(</span><span style=\"color:gainsboro;\">propertyName</span><span style=\"color:gainsboro;\">)</span><span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">ToArray</span><span style=\"color:gainsboro;\">());</span>\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:gainsboro;\">}</span>\n \n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#569cd6;\">public</span>&nbsp;<span style=\"color:#569cd6;\">static</span>&nbsp;<span style=\"color:gainsboro;\">IEnumerable</span><span style=\"color:gainsboro;\">&lt;</span><span style=\"color:gainsboro;\">T</span><span style=\"color:gainsboro;\">&gt;</span>&nbsp;<span style=\"color:#dcdcaa;\">WhereNotNull</span><span style=\"color:gainsboro;\">&lt;</span><span style=\"color:#b8d7a3;\">T</span><span style=\"color:gainsboro;\">&gt;(</span><span style=\"color:#569cd6;\">this</span>&nbsp;<span style=\"color:gainsboro;\">IEnumerable</span><span style=\"color:gainsboro;\">&lt;</span><span style=\"color:gainsboro;\">T</span><span style=\"color:#b4b4b4;\">?</span><span style=\"color:gainsboro;\">&gt;</span><span style=\"color:#b4b4b4;\">?</span>&nbsp;<span style=\"color:#9cdcfe;\">instance</span><span style=\"color:gainsboro;\">)</span>&nbsp;<span style=\"color:#b4b4b4;\">=&gt;</span>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:gainsboro;\">instance</span>&nbsp;<span style=\"color:#569cd6;\">is</span>&nbsp;<span style=\"color:#569cd6;\">null</span>&nbsp;<span style=\"color:#b4b4b4;\">?</span>&nbsp;<span style=\"color:gainsboro;\">Array</span><span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">Empty</span><span style=\"color:gainsboro;\">&lt;</span><span style=\"color:gainsboro;\">T</span><span style=\"color:gainsboro;\">&gt;()</span>&nbsp;<span style=\"color:#b4b4b4;\">:</span>&nbsp;<span style=\"color:gainsboro;\">instance</span><span style=\"color:#b4b4b4;\">.</span><span style=\"color:gainsboro;\">OfType</span><span style=\"color:gainsboro;\">&lt;</span><span style=\"color:gainsboro;\">T</span><span style=\"color:gainsboro;\">&gt;();</span>\n<span style=\"color:gainsboro;\">}</span></pre>",
      "Date": "2023-02-24T14:38:44.2838542+01:00",
      "AvatarUrl": null,
      "Comments": []
    }
  ]
}